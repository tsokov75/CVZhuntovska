<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CVZhuntovska ‚Äì –î–µ—Ç—Å–∫–∏ –∫—É–∏–∑ –∑–∞ –ë—ä–ª–≥–∞—Ä–∏—è</title>
  <style>
    :root{
      --bg1:#fdfcfb;
      --bg2:#f9fafb;
      --accent:#0ea5e9;
      --accent2:#22c55e;
      --text:#1f2937;
      --muted:#6b7280;
      --btn:#ffffff;
      --btnHover:#f3f4f6;
      --green:#16a34a;
      --red:#dc2626;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Arial;
      color:var(--text);
      background:
        radial-gradient(1000px 500px at 0% -10%, #fff7ed 0%, transparent 60%),
        radial-gradient(1000px 500px at 100% 0%, #e0f2fe 0%, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex; align-items:flex-start; justify-content:center;
      padding:24px;
    }
    .app{
      width:100%; max-width:900px;
      background:#ffffff;
      border:1px solid #eef2f7;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hero{
      display:flex; align-items:center; gap:18px;
      padding:20px 22px;
      background: linear-gradient(180deg, #ffffff, #f8fafc);
      border-bottom:1px solid #eef2f7;
    }
    .flag{
      width:88px; height:58px; flex:0 0 auto;
      border-radius:10px; overflow:hidden; box-shadow: 0 6px 16px rgba(0,0,0,.08);
      border:1px solid #e5e7eb;
    }
    .title{ display:flex; flex-direction:column; gap:4px; }
    .title h1{ margin:0; font-size: clamp(20px, 3vw, 26px); }
    .subtitle{ margin:0; color:var(--muted); font-size:14px; }
    .content{ padding: 10px 22px 22px; }
    .statusbar{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin-bottom: 14px; }
    .badge{ background:#e0f2fe; color:#0c4a6e; padding:6px 10px; border-radius:999px; font-weight:600; font-size:13px; border:1px solid #bae6fd; }
    .chip{ background:#f1f5f9; color:#334155; padding:6px 10px; border-radius:999px; font-size:13px; border:1px solid #e2e8f0; }
    .progress{ height:10px; width:100%; background:#eef2f7; border-radius:999px; overflow:hidden; }
    .progress>div{ height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent2)); transition: width .3s ease; }
    .spacer{ height: 10px; }
    .card{ background:#ffffff; border:1px solid #eef2f7; border-radius:16px; padding:16px; box-shadow: var(--shadow); margin-top: 6px; }
    .question{ font-weight:800; font-size: clamp(18px, 2.2vw, 22px); line-height:1.35; margin: 10px 0 16px; }
    .answers{ display:grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width:700px){ .answers{ grid-template-columns: 1fr 1fr; } }
    .answer{
      border:1px solid #e5e7eb; background: var(--btn); padding:14px; border-radius:14px; cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
      min-height:56px; text-align:left; display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .answer:hover{ background: var(--btnHover); }
    .answer:active{ transform: scale(0.99); }
    .answer.disabled{ cursor: default; opacity: .85; }
    .answer.correct{ border-color: rgba(22,163,74,0.6); background: rgba(34,197,94,0.09); box-shadow: inset 0 0 0 1px rgba(34,197,94,.25); }
    .answer.wrong{ border-color: rgba(220,38,38,0.6); background: rgba(248,113,113,0.10); box-shadow: inset 0 0 0 1px rgba(248,113,113,.25); }
    .meta{ display:flex; justify-content:space-between; align-items:center; margin-top: 12px; color:#374151; font-size:14px; }
    .footer{ display:flex; gap:10px; justify-content:space-between; margin-top:16px; }
    button{ border-radius:12px; padding:12px 14px; border:1px solid #e5e7eb; background:#ffffff; color:#111827; cursor:pointer; font-weight:700; }
    button.primary{ background: linear-gradient(180deg, #60a5fa, #3b82f6); color:white; border:none; }
    button.primary:hover{ filter: brightness(1.05); }
    button:active{ transform: scale(.99); }
    .hidden{ display:none !important; }
    .score{ font-size: 18px; background:#fff7ed; border:1px solid #fed7aa; color:#9a3412; padding:12px 14px; border-radius:12px; margin-top:10px; }
  </style>
</head>
<body>
  <main class="app" role="application" aria-label="–ö—É–∏–∑ ‚Äì –ë—ä–ª–≥–∞—Ä–∏—è –∑–∞ –¥–µ—Ü–∞">
    <div class="hero">
      <div class="flag" aria-hidden="true">
        <!-- Inline SVG (–±—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –∑–Ω–∞–º–µ) -->
        <svg viewBox="0 0 3 2" width="100%" height="100%" preserveAspectRatio="xMidYMid slice">
          <rect width="3" height="2" fill="#ffffff"></rect>
          <rect y="0.6666" width="3" height="0.6666" fill="#00966E"></rect>
          <rect y="1.3333" width="3" height="0.6666" fill="#D62612"></rect>
        </svg>
      </div>
      <div class="title">
        <h1>üéà –ö—É–∏–∑ –∑–∞ –º–∞–ª–∫–∏ –æ—Ç–∫—Ä–∏–≤–∞—Ç–µ–ª–∏</h1>
        <p class="subtitle">–¢–æ—á–∫–∏ —Å–ø–æ—Ä–µ–¥ –≤—Ä–µ–º–µ: ‚â§5s = 3, ‚â§8s = 2, >10s = 1</p>
      </div>
    </div>

    <div class="content">
      <div class="statusbar">
        <div class="badge" id="badge">–í—ä–ø—Ä–æ—Å 1 –æ—Ç 3</div>
        <div class="chip">–ò–∑–±—Ä–∞–Ω–∏: <span id="pickedCount">0</span> / <span id="needCount">1</span></div>
        <div class="chip">–¢–æ—á–∫–∏: <span id="score">0</span></div>
        <div class="chip">‚è±Ô∏è –í—Ä–µ–º–µ: <span id="timer">0.0</span> s</div>
      </div>
      <div class="progress" aria-hidden="true"><div id="progressBar"></div></div>
      <div class="spacer"></div>

      <div class="card">
        <div class="question" id="questionText">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ‚Ä¶</div>
        <div class="answers" id="answers" role="group" aria-label="–í—ä–∑–º–æ–∂–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä–∏"></div>
        <div class="meta">
          <div id="helpText" style="color:var(--muted)">–ú–∞—Ä–∫–∏—Ä–∞–π –≤–µ—Ä–Ω–∏—è –æ—Ç–≥–æ–≤–æ—Ä</div>
          <div></div>
        </div>
        <div class="footer">
          <button id="resetBtn" type="button">–†–µ—Å—Ç–∞—Ä—Ç (—Ä–∞–∑–±—ä—Ä–∫–∞–π)</button>
          <button id="nextBtn" class="primary hidden" type="button">–°–ª–µ–¥–≤–∞—â –≤—ä–ø—Ä–æ—Å</button>
        </div>
        <div class="score hidden" id="finalBox"></div>
      </div>
    </div>
  </main>

  <script>
    // === –î–∞–Ω–Ω–∏ ===
    const BASE_QUESTIONS = [
      { q: "–° –∫–æ—è –æ—Ç –ø–æ—Å–æ—á–µ–Ω–∏—Ç–µ –¥—ä—Ä–∂–∞–≤–∏ –ë—ä–ª–≥–∞—Ä–∏—è –Ω–µ –≥—Ä–∞–Ω–∏—á–∏?",
        a: ["–ê: –†—É–º—ä–Ω–∏—è","–ë: –ô–æ—Ä–¥–∞–Ω–∏—è","–í: –¢—É—Ä—Ü–∏—è","–ì: –ì—ä—Ä—Ü–∏—è"], correct: [1] },
      { q: "–ö–æ—è –µ –ø–ª–∞–Ω–∏–Ω–∞—Ç–∞, –∫–æ—è—Ç–æ —Ä–∞–∑–¥–µ–ª—è –ë—ä–ª–≥–∞—Ä–∏—è –Ω–∞ –Æ–∂–Ω–∞ –∏ –°–µ–≤–µ—Ä–Ω–∞?",
        a: ["–ê: –°—Ç—Ä–∞–Ω–¥–∂–∞","–ë: –†–∏–ª–∞","–í: –°—Ç–∞—Ä–∞ –ø–ª–∞–Ω–∏–Ω–∞","–ì: –ü–ª–∞–Ω–∞"], correct: [2] },
      { q: "–ö–æ–π –≥—Ä–∞–¥ –µ —Å—Ç–æ–ª–∏—Ü–∞ –Ω–∞ –ë—ä–ª–≥–∞—Ä–∏—è –≤ –¥–Ω–µ—à–Ω–æ –≤—Ä–µ–º–µ?",
        a: ["–ê: –í–µ–ª–∏–∫–æ –¢—ä—Ä–Ω–æ–≤–æ","–ë: –°–æ—Ñ–∏—è","–í: –ü–ª–∏—Å–∫–∞","–ì: –ü—Ä–µ—Å–ª–∞–≤"], correct: [1] }
    ];

    let QUESTIONS = [];

    const questionText = document.getElementById('questionText');
    const answersEl = document.getElementById('answers');
    const badge = document.getElementById('badge');
    const progressBar = document.getElementById('progressBar');
    const pickedCountEl = document.getElementById('pickedCount');
    const needCountEl = document.getElementById('needCount');
    const scoreEl = document.getElementById('score');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');
    const finalBox = document.getElementById('finalBox');
    const timerEl = document.getElementById('timer');

    let index = 0, score = 0, pickedCount = 0, locked = false;
    let selected = new Set();
    let startTime = 0;
    let timerTick = null;

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }
    function deepCopy(obj){ return JSON.parse(JSON.stringify(obj)); }

    function resetDataShuffle(){
      QUESTIONS = deepCopy(BASE_QUESTIONS);
      shuffle(QUESTIONS);
      for(const q of QUESTIONS){
        const zipped = q.a.map((text,i)=>({text, idx:i, isCorrect:q.correct.includes(i)}));
        shuffle(zipped);
        q.a = zipped.map(z=>z.text);
        q.correct = zipped.map((z,i)=> z.isCorrect ? i : -1).filter(i=>i>=0);
      }
    }

    function updateProgress(){
      const step = ((index)/QUESTIONS.length)*100;
      progressBar.style.width = step + '%';
      badge.textContent = `–í—ä–ø—Ä–æ—Å ${Math.min(index+1,QUESTIONS.length)} –æ—Ç ${QUESTIONS.length}`;
    }

    function startQuestionTimer(){
      startTime = performance.now();
      timerEl.textContent = '0.0';
      if (timerTick) cancelAnimationFrame(timerTick);
      const loop = () => {
        const elapsed = (performance.now()-startTime)/1000;
        timerEl.textContent = elapsed.toFixed(1);
        timerTick = requestAnimationFrame(loop);
      };
      timerTick = requestAnimationFrame(loop);
    }
    function stopQuestionTimer(){ if (timerTick) cancelAnimationFrame(timerTick); }
    function currentElapsedSeconds(){ return (performance.now()-startTime)/1000; }

    function renderQuestion(){
      locked=false; pickedCount=0; selected.clear();
      pickedCountEl.textContent='0'; nextBtn.classList.add('hidden'); finalBox.classList.add('hidden');
      const q = QUESTIONS[index];
      questionText.textContent = q.q;
      needCountEl.textContent = String(q.correct.length);
      answersEl.innerHTML='';
      q.a.forEach((text,i)=>{
        const btn = document.createElement('button');
        btn.className='answer'; btn.type='button'; btn.dataset.idx=i;
        btn.innerHTML=`<span>${text}</span>`;
        btn.addEventListener('click',()=>handlePick(btn));
        answersEl.appendChild(btn);
      });
      updateProgress();
      startQuestionTimer();
    }

    function calcPoints(elapsedSec){
      if (elapsedSec <= 5) return 3;
      if (elapsedSec <= 8) return 2;
      return 1; // >10s => 1
    }

    function handlePick(btn){
      if(locked || btn.classList.contains('disabled')) return;
      const q = QUESTIONS[index];
      const realIdx = parseInt(btn.dataset.idx,10);
      if(selected.has(realIdx)) return;
      selected.add(realIdx);

      pickedCount++; pickedCountEl.textContent=String(pickedCount);
      const isCorrect = q.correct.includes(realIdx);
      btn.classList.add('disabled', isCorrect ? 'correct' : 'wrong');

      if(isCorrect){
        document.querySelectorAll('.answer:not(.correct):not(.wrong)').forEach(b=> b.classList.add('disabled'));
        const pts = calcPoints(currentElapsedSeconds());
        score += pts; scoreEl.textContent = String(score);
        stopQuestionTimer();
        setTimeout(()=> nextBtn.classList.remove('hidden'), 400);
        locked = true;
      } else {
        // –º–∞—Ä–∫–∏—Ä–∞–º–µ –≥—Ä–µ—à–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è–≤–∞–º–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç
      }
    }

    function nextQuestion(){
      if(index < QUESTIONS.length-1){ index++; renderQuestion(); }
      else {
        progressBar.style.width='100%'; badge.textContent='–ì–æ—Ç–æ–≤–æ!';
        answersEl.innerHTML=''; questionText.textContent='–†–µ–∑—É–ª—Ç–∞—Ç';
        finalBox.classList.remove('hidden');
        finalBox.innerHTML = `–°—ä–±—Ä–∞–Ω–∏ —Ç–æ—á–∫–∏: <strong>${score}</strong> (–º–∞–∫—Å. ${QUESTIONS.length*3}).`;
        nextBtn.classList.add('hidden');
      }
    }

    nextBtn.addEventListener('click', nextQuestion);
    resetBtn.addEventListener('click', ()=>{ index=0; score=0; scoreEl.textContent='0'; resetDataShuffle(); renderQuestion(); });

    resetDataShuffle();
    renderQuestion();
  </script>
</body>
</html>
